# STRIDE — Угрозы и контроли для Wish List Service

## Таблица угроз по STRIDE

| Поток/Элемент | Угроза (S/T/R/I/D/E) | Описание угрозы | Контроль | Ссылка на NFR | Проверка/Артефакт |
|---------------|-----------------------|------------------|----------|---------------|-------------------|
| F1 | S (Spoofing) | Подделка клиента/имперсонация пользователя | Аутентификация пользователей, API ключи | NFR-01 | Unit тесты аутентификации |
| F1 | T (Tampering) | Модификация данных в HTTP запросах | HTTPS, валидация входных данных | NFR-02 | Pydantic валидация, HTTPS |
| F1 | R (Repudiation) | Отказ от выполнения операций | Логирование всех операций | NFR-03 | Структурированные логи |
| F1 | I (Information Disclosure) | Утечка данных пользователей | Авторизация, фильтрация ответов | NFR-04 | Тесты авторизации |
| F1 | D (Denial of Service) | Перегрузка сервера запросами | Rate limiting, throttling | NFR-05 | Нагрузочное тестирование |
| F1 | E (Elevation of Privilege) | Получение несанкционированного доступа | RBAC, проверка прав доступа | NFR-06 | Тесты авторизации |
| F3 | T (Tampering) | Модификация бизнес-логики | Валидация в сервисном слое | NFR-02 | Unit тесты валидации |
| F3 | I (Information Disclosure) | Утечка внутренней логики | Минимальная информация в ошибках | NFR-04 | Обработка исключений |
| F4 | T (Tampering) | Модификация данных в хранилище | Валидация перед сохранением | NFR-02 | Тесты персистентности |
| F4 | I (Information Disclosure) | Несанкционированный доступ к данным | Контроль доступа к хранилищу | NFR-04 | Тесты безопасности данных |
| F4 | D (Denial of Service) | Переполнение памяти хранилища | Ограничения на размер данных | NFR-05 | Тесты производительности |
| F5 | T (Tampering) | Модификация заметок | Валидация заметок | NFR-02 | Тесты валидации заметок |
| F5 | I (Information Disclosure) | Утечка заметок пользователей | Авторизация доступа к заметкам | NFR-04 | Тесты авторизации заметок |

## Обоснование угроз

### Высокоприоритетные угрозы:
1. **F1-S (Spoofing)**: Критично для системы wish list, так как пользователи должны иметь доступ только к своим данным
2. **F1-T (Tampering)**: Важно предотвратить модификацию данных списков желаний
3. **F1-I (Information Disclosure)**: Защита персональных данных пользователей и их списков желаний

### Среднеприоритетные угрозы:
4. **F1-D (Denial of Service)**: Защита от перегрузки системы
5. **F4-I (Information Disclosure)**: Защита данных в хранилище
6. **F3-T (Tampering)**: Защита бизнес-логики

### Низкоприоритетные угрозы:
7. **F1-R (Repudiation)**: Логирование для аудита
8. **F1-E (Elevation of Privilege)**: Контроль прав доступа
9. **F4-T, F5-T (Tampering)**: Валидация данных
10. **F4-D (Denial of Service)**: Ограничения ресурсов
11. **F5-I (Information Disclosure)**: Авторизация заметок

## Связь с архитектурой
- **Edge Boundary**: Основные угрозы связаны с внешним взаимодействием (F1)
- **Core Boundary**: Угрозы связаны с внутренней обработкой данных (F3, F4, F5)
- **Trust Boundaries**: Критичны для предотвращения несанкционированного доступа
